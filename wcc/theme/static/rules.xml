<?xml version="1.0" encoding="UTF-8"?>
<!--start main rule, only theme if #visual-portal-wrapper exist -->
<rules
    xmlns="http://namespaces.plone.org/diazo"
    xmlns:css="http://namespaces.plone.org/diazo/css"
    xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
    xmlns:xi="http://www.w3.org/2001/XInclude"
    css:if-content="#visual-portal-wrapper">
    
    <!--HEAD SECTION-->
    <!-- Drop styles in the head - these are added back by including them from Plone -->
    <drop theme="/html/head/style | /html/head/script | /html/head/link | /html/head/title" />
    <prepend theme="/html/head" content="/html/head/base | /html/head/link | /html/head/style | /html/head/script | /html/head/meta | /html/head/title" />
    
    <!--logo link-->
    <copy attributes="href" content="//a[@id='portal-logo']" theme="//h1[contains(@class, 'title')]/a" />
    
    <!--BODY-->
    <merge theme="/html/body" content="/html/body" attributes="class"/>
    <merge theme="/html/body" content="/html/body" attributes="dir"/>
    
    <!--navigation-->
    <replace theme-children='//ul[@id="portal-globalnav"]' content-children='//ul[@id="portal-globalnav"]' />
    
    <!--homepage-->
    <rules if-content="//body[contains(@class, 'section-front-page')]">
        <theme href="index.html" />
    </rules>
    <!--content left-->
    <rules if-content="//div[@id='portal-column-one']">
        <theme href="right-content.html" />
    </rules>
    <!--content right-->
    <rules if-content="//div[@id='portal-column-two']">
        <theme href="left-content.html" />
    </rules>
    <!--content/nocolumn-->
    <rules if-not-content="//div[@id='portal-column-one'] and //div[@id='portal-column-two']">
        <theme href="content.html" />
    </rules>
    
    <replace theme-children="//article[contains(@class, 'main-page')]" content-children="//div[@id='portal-column-content']" />
    <replace theme-children="//aside" content-children="//div[@id='portal-column-one'] | //div[@id='portal-column-two']" />
    
</rules><!--end main rule-->